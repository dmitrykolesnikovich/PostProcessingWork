#include "WavePackets.glsl"

out vec4 oColor;

in vec2 Tex;
in vec3 Pos; // world space position

void main()
{
    const float w[25] = {	0.00296901674395065, 0.013306209891014005, 0.02193823127971504, 0.013306209891014005, 0.00296901674395065,
                            0.013306209891014005, 0.05963429543618023, 0.09832033134884507, 0.05963429543618023, 0.013306209891014005,
                            0.02193823127971504, 0.09832033134884507, 0.16210282163712417, 0.09832033134884507, 0.02193823127971504,
                            0.013306209891014005, 0.05963429543618023, 0.09832033134884507, 0.05963429543618023, 0.013306209891014005,
                            0.00296901674395065, 0.013306209891014005, 0.02193823127971504, 0.013306209891014005, 0.00296901674395065,
                        };
    Out.oColor = float4(0,0,0,1.0);
    for (float y=-2; y<2.5; y++)
        for (float x=-2; x<2.5; x++)
            Out.oColor += w[(int(y)+2)*5+int(x)+2]*textureLod(g_waterHeightTex, Tex+float2(x*g_diffX,y*g_diffY), 0.0);
}